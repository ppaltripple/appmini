(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{150:function(e,t,a){e.exports=a(195)},187:function(e,t,a){},195:function(e,t,a){"use strict";a.r(t);a(151),a(176);var o=a(0),i=a.n(o),c=a(32),n=a.n(c),l=a(18),s=a(70),r=a(77),p=a(5),d=a(3),u=a(26),y=a(16),O=a.n(y),v={activeStory:null,activeView:null,activePanel:null,storiesHistory:[],viewsHistory:[],panelsHistory:[],activeModals:[],modalHistory:[],popouts:[],scrollPosition:[]},b={accessToken:void 0,colorScheme:"client_light",activeTab:[],componentScroll:[]},h={forms:[]},j=Object(l.combineReducers)({vkui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COLOR_SCHEME":return Object(d.a)({},e,{colorScheme:t.payload});case"SET_ACCESS_TOKEN":return Object(d.a)({},e,{accessToken:t.payload});case"SET_ACTIVE_TAB":return Object(d.a)({},e,{activeTab:Object(d.a)({},e.activeTab,Object(p.a)({},t.payload.component,t.payload.tab))});case"SET_SCROLL_POSITION":return Object(d.a)({},e,{componentScroll:Object(d.a)({},e.componentScroll,Object(p.a)({},t.payload.component,{x:t.payload.x,y:t.payload.y}))});case"SET_SCROLL_POSITION_BY_ID":var a=document.getElementById(t.payload.component).getElementsByClassName("HorizontalScroll__in")[0],o=a.scrollLeft,i=a.scrollTop;return Object(d.a)({},e,{componentScroll:Object(d.a)({},e.componentScroll,Object(p.a)({},t.payload.component,{x:o,y:i}))});default:return e}},router:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PAGE":var a=t.payload.view,o=t.payload.panel;window.history.pushState(null,null);var i=e.panelsHistory[a]||[],c=e.viewsHistory[e.activeStory]||[],n=c.indexOf(a);return-1!==n&&c.splice(n,1),-1===i.indexOf(o)&&(i=[].concat(Object(u.a)(i),[o])),i.length>1&&O.a.send("VKWebAppEnableSwipeBack",{}).then(function(e){return e}).catch(function(e){return e}),Object(d.a)({},e,{activeView:a,activePanel:o,panelsHistory:Object(d.a)({},e.panelsHistory,Object(p.a)({},a,i)),viewsHistory:Object(d.a)({},e.viewsHistory,Object(p.a)({},e.activeStory,[].concat(Object(u.a)(c),[a]))),scrollPosition:Object(d.a)({},e.scrollPosition,Object(p.a)({},e.activeStory+"_"+e.activeView+"_"+e.activePanel,window.pageYOffset))});case"SET_STORY":window.history.pushState(null,null);var l=e.viewsHistory[t.payload.story]||[t.payload.story],s=e.storiesHistory,r=l[l.length-1],y=e.panelsHistory[r]||[t.payload.initial_panel],b=y[y.length-1];if(t.payload.story===e.activeStory)if(y.length>1){var h=y.shift();b=(y=[h])[y.length-1]}else if(l.length>1){var j=l.shift();r=(l=[j])[l.length-1],b=(y=e.panelsHistory[r])[y.length-1]}return t.payload.story===e.activeStory&&1===y.length&&window.pageYOffset>0&&(window.scrollTo(0,30),function e(){var t=document.documentElement.scrollTop||document.body.scrollTop;t>30||t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/8))}()),(-1===s.indexOf(t.payload.story)||s[0]===t.payload.story&&s[s.length-1]!==t.payload.story)&&(s=[].concat(Object(u.a)(s),[t.payload.story])),Object(d.a)({},e,{activeStory:t.payload.story,activeView:r,activePanel:b,storiesHistory:s,viewsHistory:Object(d.a)({},e.viewsHistory,Object(p.a)({},r,l)),panelsHistory:Object(d.a)({},e.panelsHistory,Object(p.a)({},r,y)),scrollPosition:Object(d.a)({},e.scrollPosition,Object(p.a)({},e.activeStory+"_"+e.activeView+"_"+e.activePanel,window.pageYOffset))});case"GO_BACK":var w=e.activeView,f=e.activePanel,m=e.activeStory,S=e.popouts;if(S[w])return S[w]=null,Object(d.a)({},e,{popouts:Object(d.a)({},e.popouts,{popoutsData:S})});var g=e.modalHistory[w];if(void 0!==g&&0!==g.length){var H=g[g.length-2]||null;return null===H?g=[]:-1!==g.indexOf(H)?g=g.splice(0,g.indexOf(H)+1):g.push(H),Object(d.a)({},e,{activeModals:Object(d.a)({},e.activeModals,Object(p.a)({},w,H)),modalHistory:Object(d.a)({},e.modalHistory,Object(p.a)({},w,g))})}var E=e.panelsHistory[w]||[],_=e.viewsHistory[e.activeStory]||[],T=e.storiesHistory;if(E.length>1)E.pop(),f=E[E.length-1];else if(_.length>1){_.pop(),w=_[_.length-1];var V=e.panelsHistory[w];f=V[V.length-1]}else if(T.length>1){T.pop(),m=T[T.length-1],w=e.viewsHistory[m][e.viewsHistory[m].length-1];var P=e.panelsHistory[w];f=P.length>1?P[P.length-1]:P[0]}else O.a.send("VKWebAppClose",{status:"success"}).then(function(e){return e}).catch(function(e){return e});return 1===E.length&&O.a.send("VKWebAppDisableSwipeBack",{}).then(function(e){return e}).catch(function(e){return e}),Object(d.a)({},e,{activeView:w,activePanel:f,activeStory:m,viewsHistory:Object(d.a)({},e.viewsHistory,Object(p.a)({},e.activeView,_)),panelsHistory:Object(d.a)({},e.panelsHistory,Object(p.a)({},e.activeView,E))});case"OPEN_POPOUT":return window.history.pushState(null,null),Object(d.a)({},e,{popouts:Object(d.a)({},e.popouts,Object(p.a)({},e.activeView,t.payload.popout))});case"CLOSE_POPOUT":return Object(d.a)({},e,{popouts:Object(d.a)({},e.popouts,Object(p.a)({},e.activeView,null))});case"OPEN_MODAL":window.history.pushState(null,null);var x=t.payload.id||null,A=e.modalHistory[e.activeView]?Object(u.a)(e.modalHistory[e.activeView]):[];return null===x?A=[]:-1!==A.indexOf(x)?A=A.splice(0,A.indexOf(x)+1):A.push(x),Object(d.a)({},e,{activeModals:Object(d.a)({},e.activeModals,Object(p.a)({},e.activeView,x)),modalHistory:Object(d.a)({},e.modalHistory,Object(p.a)({},e.activeView,A))});case"CLOSE_MODAL":var C=e.modalHistory[e.activeView][e.modalHistory[e.activeView].length-2]||null,k=e.modalHistory[e.activeView]?Object(u.a)(e.modalHistory[e.activeView]):[];return null===C?k=[]:-1!==k.indexOf(C)?k=k.splice(0,k.indexOf(C)+1):k.push(C),Object(d.a)({},e,{activeModals:Object(d.a)({},e.activeModals,Object(p.a)({},e.activeView,C)),modalHistory:Object(d.a)({},e.modalHistory,Object(p.a)({},e.activeView,k))});default:return e}},formData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_FORM_DATA":return Object(d.a)({},e,{forms:Object(d.a)({},e.forms,Object(p.a)({},t.payload.form,t.payload.data))});default:return e}}}),w=a(72),f=(a(69),a(187),a(73)),m=a(74),S=a(78),g=a(75),H=a(79),E=a(46),_=a.n(E),T=a(10),V=function(e){var t=e.id,a=e.go,o=e.fetchedUser;return i.a.createElement(T.f,{id:t},i.a.createElement(T.g,null,"Example"),o&&i.a.createElement(T.d,{title:"User Data Fetched with VK Connect"},i.a.createElement(T.e,{before:o.photo_200?i.a.createElement(T.a,{src:o.photo_200}):null,description:o.city&&o.city.title?o.city.title:""},"".concat(o.first_name," ").concat(o.last_name))),i.a.createElement(T.d,{title:"Navigation Example"},i.a.createElement(T.c,null,i.a.createElement(T.b,{size:"xl",level:"2",onClick:a,"data-to":"persik"},"Show me the Persik, please"))))},P=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(S.a)(this,Object(g.a)(t).call(this,e))).go=function(e){a.setState({activePanel:e.currentTarget.dataset.to})},a.state={activePanel:"home",fetchedUser:null},a}return Object(H.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;_.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data});break;default:console.log(t.detail.type)}}),_.a.send("VKWebAppGetUserInfo",{})}},{key:"render",value:function(){return i.a.createElement(T.h,{activePanel:this.state.activePanel},i.a.createElement(V,{id:"home",fetchedUser:this.state.fetchedUser,go:this.go}))}}]),t}(i.a.Component);a.d(t,"store",function(){return x});var x=Object(l.createStore)(j,Object(w.composeWithDevTools)(Object(l.applyMiddleware)(s.a)));x.dispatch({type:"SET_STORY",payload:{story:"home",initial_panel:"base"}}),n.a.render(i.a.createElement(r.a,{store:x},i.a.createElement(P,null)),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.5e8eacf2.chunk.js.map