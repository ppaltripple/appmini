{"version":3,"sources":["js/store/router/reducers.js","js/store/vk/reducers.js","js/store/formData/reducers.js","js/store/reducers.js","js/store/vk/actionTypes.js","js/store/router/actionTypes.js","js/services/VK.js","js/services/_functions.js","js/store/formData/actionTypes.js","js/panels/home/base.js","App.js","index.js","js/store/router/actions.js"],"names":["initialState","activeStory","activeView","activePanel","storiesHistory","viewsHistory","panelsHistory","activeModals","modalHistory","popouts","scrollPosition","accessToken","undefined","colorScheme","activeTab","componentScroll","forms","combineReducers","vkui","state","arguments","length","action","type","Object","objectSpread","payload","defineProperty","component","tab","x","y","element","document","getElementById","getElementsByClassName","scrollLeft","scrollTop","router","View","view","Panel","panel","window","history","pushState","viewIndexInHistory","indexOf","splice","concat","toConsumableArray","VKConnect","send","then","data","catch","error","pageYOffset","story","initial_panel","firstPanel","shift","firstView","scrollTo","smoothScrollToTop","c","documentElement","body","requestAnimationFrame","setView","setPanel","setStory","popoutsData","viewModalsHistory","activeModal","push","pop","panelsHistoryNew","status","popout","id","modalsHistory","formData","form","Home","_ref","go","fetchedUser","react_default","a","createElement","es6","title","before","photo_200","src","description","city","first_name","last_name","size","level","onClick","data-to","App","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","e","setState","currentTarget","dataset","to","_this2","connect","subscribe","detail","console","log","base","React","Component","__webpack_require__","d","__webpack_exports__","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","dispatch","ReactDOM","render","react_redux_es","src_App"],"mappings":"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","file":"static/js/main.5e8eacf2.chunk.js","sourcesContent":["import {\r\n    SET_PAGE,\r\n    GO_BACK,\r\n    OPEN_POPOUT,\r\n    CLOSE_POPOUT,\r\n    OPEN_MODAL,\r\n    CLOSE_MODAL,\r\n    SET_STORY\r\n} from './actionTypes';\r\n\r\nimport * as VK from \"../../services/VK\";\r\nimport {smoothScrollToTop} from \"../../services/_functions\";\r\n\r\nconst initialState = {\r\n    activeStory: null,\r\n    activeView: null,\r\n    activePanel: null,\r\n\r\n    storiesHistory: [],\r\n    viewsHistory: [],\r\n    panelsHistory: [],\r\n\r\n    activeModals: [],\r\n    modalHistory: [],\r\n    popouts: [],\r\n\r\n    scrollPosition: []\r\n};\r\n\r\nexport const routerReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case SET_PAGE: {\r\n            let View = action.payload.view;\r\n            let Panel = action.payload.panel;\r\n\r\n            window.history.pushState(null, null);\r\n\r\n            let panelsHistory = state.panelsHistory[View] || [];\r\n            let viewsHistory = state.viewsHistory[state.activeStory] || [];\r\n\r\n            const viewIndexInHistory = viewsHistory.indexOf(View);\r\n\r\n            if (viewIndexInHistory !== -1) {\r\n                viewsHistory.splice(viewIndexInHistory, 1);\r\n            }\r\n\r\n            if (panelsHistory.indexOf(Panel) === -1) {\r\n                panelsHistory = [...panelsHistory, Panel];\r\n            }\r\n\r\n            if (panelsHistory.length > 1) {\r\n                VK.swipeBackOn();\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                activeView: View,\r\n                activePanel: Panel,\r\n\r\n                panelsHistory: {\r\n                    ...state.panelsHistory,\r\n                    [View]: panelsHistory,\r\n                },\r\n                viewsHistory: {\r\n                    ...state.viewsHistory,\r\n                    [state.activeStory]: [...viewsHistory, View]\r\n                },\r\n                scrollPosition: {\r\n                    ...state.scrollPosition,\r\n                    [state.activeStory + \"_\" + state.activeView + \"_\" + state.activePanel]: window.pageYOffset\r\n                }\r\n            };\r\n        }\r\n\r\n        case SET_STORY: {\r\n            window.history.pushState(null, null);\r\n\r\n            let viewsHistory = state.viewsHistory[action.payload.story] || [action.payload.story];\r\n\r\n            let storiesHistory = state.storiesHistory;\r\n            let activeView = viewsHistory[viewsHistory.length - 1];\r\n            let panelsHistory = state.panelsHistory[activeView] || [action.payload.initial_panel];\r\n            let activePanel = panelsHistory[panelsHistory.length - 1];\r\n\r\n            if (action.payload.story === state.activeStory) {\r\n                if (panelsHistory.length > 1) {\r\n                    let firstPanel = panelsHistory.shift();\r\n                    panelsHistory = [firstPanel];\r\n\r\n                    activePanel = panelsHistory[panelsHistory.length - 1];\r\n                } else if (viewsHistory.length > 1) {\r\n                    let firstView = viewsHistory.shift();\r\n                    viewsHistory = [firstView];\r\n\r\n                    activeView = viewsHistory[viewsHistory.length - 1];\r\n                    panelsHistory = state.panelsHistory[activeView];\r\n                    activePanel = panelsHistory[panelsHistory.length - 1];\r\n                }\r\n            }\r\n\r\n            if (action.payload.story === state.activeStory && panelsHistory.length === 1 && window.pageYOffset > 0) {\r\n                window.scrollTo(0, 30);\r\n\r\n                smoothScrollToTop();\r\n            }\r\n\r\n            const storiesIndexInHistory = storiesHistory.indexOf(action.payload.story);\r\n\r\n            if (storiesIndexInHistory === -1 || (storiesHistory[0] === action.payload.story && storiesHistory[storiesHistory.length - 1] !== action.payload.story)) {\r\n                storiesHistory = [...storiesHistory, action.payload.story];\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                activeStory: action.payload.story,\r\n                activeView: activeView,\r\n                activePanel: activePanel,\r\n\r\n                storiesHistory: storiesHistory,\r\n                viewsHistory: {\r\n                    ...state.viewsHistory,\r\n                    [activeView]: viewsHistory\r\n                },\r\n                panelsHistory: {\r\n                    ...state.panelsHistory,\r\n                    [activeView]: panelsHistory\r\n                },\r\n\r\n                scrollPosition: {\r\n                    ...state.scrollPosition,\r\n                    [state.activeStory + \"_\" + state.activeView + \"_\" + state.activePanel]: window.pageYOffset\r\n                }\r\n            };\r\n        }\r\n\r\n        case GO_BACK: {\r\n            let setView = state.activeView;\r\n            let setPanel = state.activePanel;\r\n            let setStory = state.activeStory;\r\n\r\n            let popoutsData = state.popouts;\r\n\r\n            if (popoutsData[setView]) {\r\n                popoutsData[setView] = null;\r\n\r\n                return {\r\n                    ...state,\r\n                    popouts: {\r\n                        ...state.popouts, popoutsData\r\n                    }\r\n                };\r\n            }\r\n\r\n            let viewModalsHistory = state.modalHistory[setView];\r\n\r\n            if (viewModalsHistory !== undefined && viewModalsHistory.length !== 0) {\r\n                let activeModal = viewModalsHistory[viewModalsHistory.length - 2] || null;\r\n\r\n                if (activeModal === null) {\r\n                    viewModalsHistory = [];\r\n                } else if (viewModalsHistory.indexOf(activeModal) !== -1) {\r\n                    viewModalsHistory = viewModalsHistory.splice(0, viewModalsHistory.indexOf(activeModal) + 1);\r\n                } else {\r\n                    viewModalsHistory.push(activeModal);\r\n                }\r\n\r\n                return {\r\n                    ...state,\r\n                    activeModals: {\r\n                        ...state.activeModals,\r\n                        [setView]: activeModal\r\n                    },\r\n                    modalHistory: {\r\n                        ...state.modalHistory,\r\n                        [setView]: viewModalsHistory\r\n                    }\r\n                };\r\n            }\r\n\r\n            let panelsHistory = state.panelsHistory[setView] || [];\r\n            let viewsHistory = state.viewsHistory[state.activeStory] || [];\r\n            let storiesHistory = state.storiesHistory;\r\n\r\n            if (panelsHistory.length > 1) {\r\n                panelsHistory.pop();\r\n\r\n                setPanel = panelsHistory[panelsHistory.length - 1];\r\n            } else if (viewsHistory.length > 1) {\r\n                viewsHistory.pop();\r\n\r\n                setView = viewsHistory[viewsHistory.length - 1];\r\n                let panelsHistoryNew = state.panelsHistory[setView];\r\n\r\n                setPanel = panelsHistoryNew[panelsHistoryNew.length - 1];\r\n            } else if (storiesHistory.length > 1) {\r\n                storiesHistory.pop();\r\n\r\n                setStory = storiesHistory[storiesHistory.length - 1];\r\n                setView = state.viewsHistory[setStory][state.viewsHistory[setStory].length - 1];\r\n\r\n                let panelsHistoryNew = state.panelsHistory[setView];\r\n\r\n                if (panelsHistoryNew.length > 1) {\r\n                    setPanel = panelsHistoryNew[panelsHistoryNew.length - 1];\r\n                } else {\r\n                    setPanel = panelsHistoryNew[0];\r\n                }\r\n            } else {\r\n                VK.closeApp();\r\n            }\r\n\r\n            if (panelsHistory.length === 1) {\r\n                VK.swipeBackOff();\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                activeView: setView,\r\n                activePanel: setPanel,\r\n                activeStory: setStory,\r\n\r\n                viewsHistory: {\r\n                    ...state.viewsHistory,\r\n                    [state.activeView]: viewsHistory\r\n                },\r\n                panelsHistory: {\r\n                    ...state.panelsHistory,\r\n                    [state.activeView]: panelsHistory\r\n                }\r\n            };\r\n        }\r\n\r\n        case OPEN_POPOUT: {\r\n            window.history.pushState(null, null);\r\n\r\n            return {\r\n                ...state,\r\n                popouts: {\r\n                    ...state.popouts,\r\n                    [state.activeView]: action.payload.popout\r\n                }\r\n            };\r\n        }\r\n\r\n        case CLOSE_POPOUT: {\r\n            return {\r\n                ...state,\r\n                popouts: {\r\n                    ...state.popouts,\r\n                    [state.activeView]: null\r\n                }\r\n            };\r\n        }\r\n\r\n        case OPEN_MODAL: {\r\n            window.history.pushState(null, null);\r\n\r\n            let activeModal = action.payload.id || null;\r\n            let modalsHistory = state.modalHistory[state.activeView] ? [...state.modalHistory[state.activeView]] : [];\r\n\r\n            if (activeModal === null) {\r\n                modalsHistory = [];\r\n            } else if (modalsHistory.indexOf(activeModal) !== -1) {\r\n                modalsHistory = modalsHistory.splice(0, modalsHistory.indexOf(activeModal) + 1);\r\n            } else {\r\n                modalsHistory.push(activeModal);\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                activeModals: {\r\n                    ...state.activeModals,\r\n                    [state.activeView]: activeModal\r\n                },\r\n                modalHistory: {\r\n                    ...state.modalHistory,\r\n                    [state.activeView]: modalsHistory\r\n                }\r\n            };\r\n        }\r\n\r\n        case CLOSE_MODAL: {\r\n            let activeModal = state.modalHistory[state.activeView][state.modalHistory[state.activeView].length - 2] || null;\r\n            let modalsHistory = state.modalHistory[state.activeView] ? [...state.modalHistory[state.activeView]] : [];\r\n\r\n            if (activeModal === null) {\r\n                modalsHistory = [];\r\n            } else if (modalsHistory.indexOf(activeModal) !== -1) {\r\n                modalsHistory = modalsHistory.splice(0, modalsHistory.indexOf(activeModal) + 1);\r\n            } else {\r\n                modalsHistory.push(activeModal);\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                activeModals: {\r\n                    ...state.activeModals,\r\n                    [state.activeView]: activeModal\r\n                },\r\n                modalHistory: {\r\n                    ...state.modalHistory,\r\n                    [state.activeView]: modalsHistory\r\n                }\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n","import {\r\n    SET_ACCESS_TOKEN,\r\n    SET_ACTIVE_TAB,\r\n    SET_COLOR_SCHEME,\r\n    SET_SCROLL_POSITION,\r\n    SET_SCROLL_POSITION_BY_ID\r\n} from './actionTypes';\r\n\r\nconst initialState = {\r\n    accessToken: undefined,\r\n    colorScheme: 'client_light',\r\n\r\n    activeTab: [],\r\n    componentScroll: []\r\n};\r\n\r\nexport const vkuiReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case SET_COLOR_SCHEME: {\r\n            return {\r\n                ...state,\r\n                colorScheme: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_ACCESS_TOKEN: {\r\n            return {\r\n                ...state,\r\n                accessToken: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_ACTIVE_TAB: {\r\n            return {\r\n                ...state,\r\n                activeTab: {\r\n                    ...state.activeTab,\r\n                    [action.payload.component]: action.payload.tab\r\n                },\r\n            };\r\n        }\r\n\r\n        case SET_SCROLL_POSITION: {\r\n            return {\r\n                ...state,\r\n                componentScroll: {\r\n                    ...state.componentScroll,\r\n                    [action.payload.component]: {\r\n                        x: action.payload.x,\r\n                        y: action.payload.y\r\n                    }\r\n                },\r\n            };\r\n        }\r\n\r\n        case SET_SCROLL_POSITION_BY_ID: {\r\n            let element = document.getElementById(action.payload.component).getElementsByClassName(\"HorizontalScroll__in\")[0];\r\n\r\n            let x = element.scrollLeft;\r\n            let y = element.scrollTop;\r\n\r\n            return {\r\n                ...state,\r\n                componentScroll: {\r\n                    ...state.componentScroll,\r\n                    [action.payload.component]: {\r\n                        x: x,\r\n                        y: y\r\n                    }\r\n                },\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};","import {SET_FORM_DATA} from './actionTypes';\r\n\r\nconst initialState = {\r\n    forms: []\r\n};\r\n\r\nexport const formDataReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case SET_FORM_DATA: {\r\n            return {\r\n                ...state,\r\n                forms: {\r\n                    ...state.forms,\r\n                    [action.payload.form]: action.payload.data\r\n                }\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n\r\n    }\r\n\r\n};","import {combineReducers} from \"redux\";\r\nimport {routerReducer} from './router/reducers';\r\nimport {vkuiReducer} from './vk/reducers';\r\nimport {formDataReducer} from \"./formData/reducers\";\r\n\r\nexport default combineReducers({\r\n    vkui: vkuiReducer,\r\n    router: routerReducer,\r\n    formData: formDataReducer\r\n});","export const SET_COLOR_SCHEME = 'SET_COLOR_SCHEME';\r\nexport const SET_ACCESS_TOKEN = 'SET_ACCESS_TOKEN';\r\nexport const SET_ACTIVE_TAB = 'SET_ACTIVE_TAB';\r\nexport const SET_SCROLL_POSITION = 'SET_SCROLL_POSITION';\r\nexport const SET_SCROLL_POSITION_BY_ID = 'SET_SCROLL_POSITION_BY_ID';","export const SET_PAGE = 'SET_PAGE';\r\nexport const SET_STORY = 'SET_STORY';\r\nexport const GO_BACK = 'GO_BACK';\r\nexport const OPEN_POPOUT = 'OPEN_POPOUT';\r\nexport const CLOSE_POPOUT = 'CLOSE_POPOUT';\r\nexport const OPEN_MODAL = 'OPEN_MODAL';\r\nexport const CLOSE_MODAL = 'CLOSE_MODAL';","import VKConnect from \"@vkontakte/vk-connect\";\r\n\r\nimport {store} from \"../../index\";\r\n\r\nimport {setColorScheme, setAccessToken} from \"../store/vk/actions\";\r\n\r\nconst APP_ID = 6984089;\r\nconst API_VERSION = '5.92';\r\n\r\nexport const initApp = () => (dispatch) => {\r\n    const VKConnectCallback = (e) => {\r\n        if (e.detail.type === 'VKWebAppUpdateConfig') {\r\n            VKConnect.unsubscribe(VKConnectCallback);\r\n\r\n            dispatch(setColorScheme(e.detail.data.scheme));\r\n        }\r\n    };\r\n\r\n    VKConnect.subscribe(VKConnectCallback);\r\n    return VKConnect.send('VKWebAppInit', {}).then(data => {\r\n        return data;\r\n    }).catch(error => {\r\n        return error;\r\n    });\r\n};\r\n\r\nexport const getAuthToken = (scope) => (dispatch) => {\r\n    VKConnect.send(\"VKWebAppGetAuthToken\", {\r\n        \"app_id\": APP_ID,\r\n        \"scope\": scope.join(',')\r\n    }).then(data => {\r\n        dispatch(setAccessToken(data.access_token));\r\n    }).catch(() => {\r\n        dispatch(setAccessToken(null));\r\n    });\r\n};\r\n\r\nexport const closeApp = () => {\r\n    return VKConnect.send(\"VKWebAppClose\", {\r\n        \"status\": \"success\"\r\n    }).then(data => {\r\n        return data;\r\n    }).catch(error => {\r\n        return error;\r\n    });\r\n};\r\n\r\nexport const swipeBackOn = () => {\r\n    return VKConnect.send(\"VKWebAppEnableSwipeBack\", {}).then(data => {\r\n        return data;\r\n    }).catch(error => {\r\n        return error;\r\n    });\r\n};\r\n\r\nexport const swipeBackOff = () => {\r\n    return VKConnect.send(\"VKWebAppDisableSwipeBack\", {}).then(data => {\r\n        return data;\r\n    }).catch(error => {\r\n        return error;\r\n    });\r\n};\r\n\r\nexport const groupsGet = () => {\r\n    return APICall('groups.get', {\r\n        \"extended\": \"1\",\r\n        \"fields\": \"description\",\r\n        \"count\": \"100\"\r\n    });\r\n};\r\n\r\nexport const APICall = (method, params) => {\r\n    params['access_token'] = store.getState().vkui.accessToken;\r\n    params['v'] = params['v'] === undefined ? API_VERSION : params['v'];\r\n\r\n    return VKConnect.send(\"VKWebAppCallAPIMethod\", {\r\n        \"method\": method,\r\n        \"params\": params\r\n    }).then(data => {\r\n        return data.response;\r\n    }).catch(error => {\r\n        return error;\r\n    });\r\n};\r\n","import {store} from \"../../index\";\r\n\r\nexport const smoothScrollToTop = () => {\r\n    const c = document.documentElement.scrollTop || document.body.scrollTop;\r\n\r\n    if (c > 30) {\r\n        return;\r\n    }\r\n\r\n    if (c > 0) {\r\n        window.requestAnimationFrame(smoothScrollToTop);\r\n        window.scrollTo(0, c - c / 8);\r\n    }\r\n};\r\n\r\nexport const restoreScrollPosition = () => {\r\n    let scrolls = store.getState().vkui.componentScroll;\r\n\r\n    Object.keys(scrolls).forEach((component) => {\r\n        let componentData = scrolls[component];\r\n\r\n        let element = document.getElementById(component);\r\n\r\n        if (element) {\r\n            element = element.getElementsByClassName(\"HorizontalScroll__in\")[0];\r\n\r\n            element.scrollLeft = componentData.x;\r\n            element.scrollTop = componentData.y;\r\n        }\r\n    });\r\n};\r\n\r\nexport const getActivePanel = (view) => {\r\n    let panel = store.getState().router.activePanel;\r\n\r\n    let panelsHistory = store.getState().router.panelsHistory;\r\n    if (typeof panelsHistory[view] !== \"undefined\") {\r\n        panel = panelsHistory[view][panelsHistory[view].length - 1];\r\n    }\r\n\r\n    return panel;\r\n};\r\n","export const SET_FORM_DATA = 'SAVE_FORM_DATA';","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Panel, List, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\r\n\r\nconst Home = ({ id, go, fetchedUser }) => (\r\n    <Panel id={id}>\r\n        <PanelHeader>Example</PanelHeader>\r\n        {fetchedUser &&\r\n        <Group title=\"User Data Fetched with VK Connect\">\r\n            <List\r\n                before={fetchedUser.photo_200 ? <Avatar src={fetchedUser.photo_200}/> : null}\r\n                description={fetchedUser.city && fetchedUser.city.title ? fetchedUser.city.title : ''}\r\n            >\r\n                {`${fetchedUser.first_name} ${fetchedUser.last_name}`}\r\n            </List>\r\n        </Group>}\r\n\r\n        <Group title=\"Navigation Example\">\r\n            <Div>\r\n                <Button size=\"xl\" level=\"2\" onClick={go} data-to=\"persik\">\r\n                    Show me the Persik, please\r\n                </Button>\r\n            </Div>\r\n        </Group>\r\n    </Panel>\r\n);\r\n\r\nHome.propTypes = {\r\n    id: PropTypes.string.isRequired,\r\n    go: PropTypes.func.isRequired,\r\n    fetchedUser: PropTypes.shape({\r\n        photo_200: PropTypes.string,\r\n        first_name: PropTypes.string,\r\n        last_name: PropTypes.string,\r\n        city: PropTypes.shape({\r\n            title: PropTypes.string,\r\n        }),\r\n    }),\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport connect from '@vkontakte/vk-connect/dist';\r\nimport { View } from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\n\r\nimport Home from './js/panels/home/base';\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            activePanel: 'home',\r\n            fetchedUser: null,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        connect.subscribe((e) => {\r\n            switch (e.detail.type) {\r\n                case 'VKWebAppGetUserInfoResult':\r\n                    this.setState({ fetchedUser: e.detail.data });\r\n                    break;\r\n                default:\r\n                    console.log(e.detail.type);\r\n            }\r\n        });\r\n        connect.send('VKWebAppGetUserInfo', {});\r\n    }\r\n\r\n    go = (e) => {\r\n        this.setState({ activePanel: e.currentTarget.dataset.to })\r\n    };\r\n    render() {\r\n        return (\r\n            <View activePanel={this.state.activePanel}>\r\n                <Home id=\"home\" fetchedUser={this.state.fetchedUser} go={this.go} />\r\n                \r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","import 'core-js/es6/map';\r\nimport 'core-js/es6/set';\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport {applyMiddleware, createStore} from \"redux\";\r\nimport thunk from 'redux-thunk';\r\nimport {Provider} from 'react-redux';\r\nimport rootReducer from './js/store/reducers';\r\nimport {composeWithDevTools} from 'redux-devtools-extension';\r\n\r\nimport {setStory} from \"./js/store/router/actions\";\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './css/main.css';\r\n\r\nimport App from './App';\r\n\r\nexport const store = createStore(rootReducer, composeWithDevTools(\r\n    applyMiddleware(thunk),\r\n));\r\n\r\nstore.dispatch(setStory('home', 'base'));\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App/>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);","import {SET_PAGE, SET_STORY, GO_BACK, OPEN_POPOUT, CLOSE_POPOUT, OPEN_MODAL, CLOSE_MODAL} from './actionTypes';\r\n\r\nexport const setStory = (story, initial_panel) => (\r\n    {\r\n        type: SET_STORY,\r\n        payload: {\r\n            story: story,\r\n            initial_panel: initial_panel,\r\n        }\r\n    }\r\n);\r\n\r\nexport const setPage = (view, panel) => (\r\n    {\r\n        type: SET_PAGE,\r\n        payload: {\r\n            view: view,\r\n            panel: panel\r\n        }\r\n    }\r\n);\r\n\r\nexport const goBack = () => (\r\n    {\r\n        type: GO_BACK\r\n    }\r\n);\r\n\r\nexport const openPopout = (popout) => (\r\n    {\r\n        type: OPEN_POPOUT,\r\n        payload: {\r\n            popout: popout\r\n        }\r\n    }\r\n);\r\n\r\nexport const closePopout = () => (\r\n    {\r\n        type: CLOSE_POPOUT\r\n    }\r\n);\r\n\r\nexport const openModal = (id) => (\r\n    {\r\n        type: OPEN_MODAL,\r\n        payload: {\r\n            id\r\n        }\r\n    }\r\n);\r\n\r\nexport const closeModal = () => (\r\n    {\r\n        type: CLOSE_MODAL\r\n    }\r\n);\r\n"],"sourceRoot":""}